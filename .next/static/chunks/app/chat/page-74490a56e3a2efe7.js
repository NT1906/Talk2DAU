(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{6721:(e,t,s)=>{Promise.resolve().then(s.bind(s,8459))},8459:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(5155),l=s(6408),n=s(2115),a=s(869),o=s(2885),i=s(7494),c=s(845),d=s(7351),u=s(1508);class h extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,d.s)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function x(e){let{children:t,isPresent:s,anchorX:l}=e,a=(0,n.useId)(),o=(0,n.useRef)(null),i=(0,n.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,n.useContext)(u.Q);return(0,n.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:n,right:d}=i.current;if(s||!o.current||!e||!t)return;o.current.dataset.motionPopId=a;let u=document.createElement("style");return c&&(u.nonce=c),document.head.appendChild(u),u.sheet&&u.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===l?"left: ".concat(n):"right: ".concat(d),"px !important;\n            top: ").concat(r,"px !important;\n          }\n        ")),()=>{document.head.contains(u)&&document.head.removeChild(u)}},[s]),(0,r.jsx)(h,{isPresent:s,childRef:o,sizeRef:i,children:n.cloneElement(t,{ref:o})})}let p=e=>{let{children:t,initial:s,isPresent:l,onExitComplete:a,custom:i,presenceAffectsLayout:d,mode:u,anchorX:h}=e,p=(0,o.M)(f),m=(0,n.useId)(),b=!0,g=(0,n.useMemo)(()=>(b=!1,{id:m,initial:s,isPresent:l,custom:i,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;a&&a()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[l,p,a]);return d&&b&&(g={...g}),(0,n.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[l]),n.useEffect(()=>{l||p.size||!a||a()},[l]),"popLayout"===u&&(t=(0,r.jsx)(x,{isPresent:l,anchorX:h,children:t})),(0,r.jsx)(c.t.Provider,{value:g,children:t})};function f(){return new Map}var m=s(2082);let b=e=>e.key||"";function g(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}let y=e=>{let{children:t,custom:s,initial:l=!0,onExitComplete:c,presenceAffectsLayout:d=!0,mode:u="sync",propagate:h=!1,anchorX:x="left"}=e,[f,y]=(0,m.xQ)(h),w=(0,n.useMemo)(()=>g(t),[t]),v=h&&!f?[]:w.map(b),j=(0,n.useRef)(!0),N=(0,n.useRef)(w),k=(0,o.M)(()=>new Map),[C,E]=(0,n.useState)(w),[P,T]=(0,n.useState)(w);(0,i.E)(()=>{j.current=!1,N.current=w;for(let e=0;e<P.length;e++){let t=b(P[e]);v.includes(t)?k.delete(t):!0!==k.get(t)&&k.set(t,!1)}},[P,v.length,v.join("-")]);let R=[];if(w!==C){let e=[...w];for(let t=0;t<P.length;t++){let s=P[t],r=b(s);v.includes(r)||(e.splice(t,0,s),R.push(s))}return"wait"===u&&R.length&&(e=R),T(g(e)),E(w),null}let{forceRender:S}=(0,n.useContext)(a.L);return(0,r.jsx)(r.Fragment,{children:P.map(e=>{let t=b(e),n=(!h||!!f)&&(w===P||v.includes(t));return(0,r.jsx)(p,{isPresent:n,initial:(!j.current||!!l)&&void 0,custom:s,presenceAffectsLayout:d,mode:u,onExitComplete:n?void 0:()=>{if(!k.has(t))return;k.set(t,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(null==S||S(),T(N.current),h&&(null==y||y()),c&&c())},anchorX:x,children:e},t)})})};var w=s(6766),v=s(6874),j=s.n(v);function N(){let[e,t]=(0,n.useState)([]),[s,a]=(0,n.useState)(""),[o,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),u=(0,n.useRef)(null),h=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;x(),null==(e=h.current)||e.focus()},[]),(0,n.useEffect)(()=>{var e;null==(e=u.current)||e.scrollIntoView({behavior:"smooth"})},[e,o]);let x=async()=>{try{t([])}catch(e){console.error("Error initializing messages:",e)}},p=async()=>{d(!0);try{let e=await fetch("http://localhost:8000/api/reprocess",{method:"POST"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));await e.json(),t(e=>[...e,{id:e.length+1,text:"Documents have been reprocessed successfully! You can now ask questions about the new content.",sender:"ai"}])}catch(e){console.error("Error reprocessing documents:",e),t(e=>[...e,{id:e.length+1,text:"Sorry, there was an error reprocessing the documents. Please try again.",sender:"ai"}])}finally{d(!1)}},f=async()=>{if(s.trim()){i(!0);try{var e;let r=await fetch("http://localhost:8000/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s})});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let l=await r.json();t(e=>[...e,{id:e.length+1,text:s,sender:"user"}]),t(e=>[...e,{id:e.length+1,text:l.response,sender:"ai"}]),a(""),null==(e=h.current)||e.focus()}catch(e){console.error("Error sending message:",e),t(e=>[...e,{id:e.length+1,text:"Sorry, I encountered an error. Please try again.",sender:"ai"}])}finally{i(!1)}}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#0f172a] via-[#1e293b] to-[#0f172a] flex flex-col relative overflow-x-hidden",children:[(0,r.jsxs)("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[(0,r.jsx)("div",{className:"absolute -top-32 -left-32 w-[600px] h-[600px] rounded-full bg-gradient-to-br from-blue-900/40 to-violet-900/10 blur-3xl"}),(0,r.jsx)("div",{className:"absolute top-1/2 right-0 w-[400px] h-[400px] rounded-full bg-gradient-to-tr from-cyan-900/30 to-blue-500/10 blur-2xl"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-1/2 w-[500px] h-[300px] rounded-full bg-gradient-to-tl from-indigo-900/30 to-blue-900/10 blur-2xl"})]}),(0,r.jsxs)("nav",{className:"relative z-10 flex items-center justify-between max-w-7xl mx-auto w-full px-6 py-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(j(),{href:"/",children:(0,r.jsx)("div",{className:"relative w-14 h-14 cursor-pointer",children:(0,r.jsx)(w.default,{src:"/image.png",alt:"DAU Logo",fill:!0,className:"object-contain",priority:!0})})}),(0,r.jsx)("span",{className:"text-2xl font-bold text-white tracking-tight",children:"Talk 2 DAU"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:p,disabled:c,className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-4 py-2 rounded-full shadow transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"Reprocess Documents"}),c&&(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]}),(0,r.jsx)(j(),{href:"https://github.com/NT1906/Talk2DAU.git",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(l.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"text-gray-300 hover:text-blue-400 transition-colors",children:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})})})]})]}),(0,r.jsx)("main",{className:"relative z-10 flex flex-1 flex-col items-center justify-center px-4 py-8",children:(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.7,ease:"easeOut"},className:"w-full max-w-2xl mx-auto rounded-3xl bg-white/5 backdrop-blur-xl border border-white/10 shadow-2xl px-0 py-0 flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"flex-1 w-full overflow-y-auto px-6 pt-8 pb-32 space-y-4",style:{minHeight:"400px",maxHeight:"60vh"},children:[(0,r.jsx)(y,{children:e.map(e=>(0,r.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"),children:(0,r.jsx)("div",{className:"max-w-[75%] px-5 py-3 rounded-2xl shadow-md text-base md:text-lg font-medium transition-all\n                      ".concat("user"===e.sender?"bg-gradient-to-br from-blue-500/90 to-blue-600/80 text-white rounded-br-md":"bg-white/10 text-blue-100 border border-blue-400/10 rounded-bl-md backdrop-blur-sm","\n                    "),children:e.text})},e.id))}),o&&(0,r.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:(0,r.jsxs)("div",{className:"bg-white/10 text-blue-100 rounded-2xl px-5 py-3 border border-blue-400/10 shadow-md flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce delay-100"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce delay-200"})]})}),(0,r.jsx)("div",{ref:u})]}),(0,r.jsx)("form",{className:"absolute left-0 right-0 bottom-0 px-6 pb-8",onSubmit:e=>{e.preventDefault(),f()},autoComplete:"off",children:(0,r.jsxs)("div",{className:"flex items-center w-full bg-white/10 backdrop-blur-xl border border-white/10 rounded-full shadow-lg px-4 py-3 space-x-4",children:[(0,r.jsx)("input",{ref:h,type:"text",value:s,onChange:e=>a(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),f())},placeholder:"Type your message...",disabled:o,className:"flex-1 bg-transparent outline-none border-none text-white placeholder-gray-300 text-lg px-2"}),(0,r.jsxs)(l.P.button,{type:"submit",whileHover:{scale:1.04},whileTap:{scale:.97},disabled:o||!s.trim(),className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-2 rounded-full shadow transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"Send"}),o?(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[978,441,684,358],()=>t(6721)),_N_E=e.O()}]);